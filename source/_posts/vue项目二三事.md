---
title: vue项目二三事
date: 2018-12-13 14:20:41
tags:
  - vue
---
日常开发中，总是对于自己的开发出来的东西不放心，尽管可以说测试的时候是好好的。但是我们无法完全预估用户的环境，因此需要有一种机制能完全还原用户操作环境，这其中包括用户设备以及用户操作逻辑。同时，我们也需要做性能监控，查看到底哪些部分耗时比较严重，有所针对地去做优化。

以上其实可以细分为错误监控和日志上报。

## 错误监控
对于前端，错误分为三类：
- 接口调用失败
- js运行错误（如内存溢出，不合法数据等）

不管对于哪类错误，我们都要有完全还原场景的能力。
- 对于请求类错误，我们需要将请求参数、网络环境、浏览器环境（如请求方式支持情况）做下上报。
- 对于js运行错误，我们需要将浏览器环境，错误位置堆栈，错误操作上下文做下上报。

要上报错误，需要先捕获到这些错误，获取到错误信息。一般分为全局捕获和自定义错误逻辑上报捕获（如try...catch..或自行判断）

> throw语句用来抛出一个用户自定义的异常。当前函数的执行将被停止（throw之后的语句将不会执行），并且控制将被传递到调用堆栈中的第一个catch块。如果调用者函数中没有catch块，程序将会终止。

```js
var err = new Error("出错了")

err.message // 错误提示
err.stack // 错误堆栈
err.name // 错误名称

```
